<!DOCTYPE html>
<html lang="en">
<style>
     .bar {
        display: inline-block;
        width:20px;
        height:75px;
        background-color: teal;
         margin-right:2px;
    }
</style>
<head>
    <meta charset="UTF-8">
    <title>d3 柱状图</title>
</head>
<body>

</body>
<script src="./lib/d3.js" type="text/javascript"></script>
<script type="text/javascript">
   // d3.select("body").append("p").text("hello d3 ");

   var dataset = [5, 10, 15, 20, 25];
//   d3.select("body").selectAll("p").data(dataset).enter().append("p").text("hello d3")
//    console.log(d3.selectAll("p"));

//   d3.select("body").selectAll("p").data(dataset).enter().append("p").text(function (d) {
//       return d;
//   }).style("color",function(d){
//       if(d > 15){
//           return "red";
//       }else{
//           return "black";
//       }
//   })

    //1 柱状图
//    d3.select("body").selectAll("div").data(dataset).enter().append("div").attr("class","bar").style("height",function (d) {
//        return d*5 + "px";
//    })

    //2 绘制svg
//    var w = 5troke-width",3)00;
   //    var h = 50;
   //    var svg = d3.select("body").append("svg");
   //    svg.attr("width",w).attr("height",h);
   //    var circles = svg.selectAll("circle").data(dataset).enter().append("circle");
   //    circles.attr("cx",function (d,i) {
   //            return (i*h)+25;
   //        })
   //        .attr("cy",h/2)
   //        .attr("r",function (d) {
   //            return d;
   //        })
   //        .attr("fill","yellow")
   //        .attr("stroke","orange")
   //        .attr("s
    //3 svg画柱状图
    var w = 500;
    var h = 100;
    var barPadding = 1;
    var svg = d3.select("body")
        .append("svg")
        .attr("width",w)
        .attr("height",h);
   //3-1 第一种写法
    svg.selectAll("rect")
        .data(dataset)
        .enter()
        .append("rect")
        .attr("x",function (d,i) {
            return i * (w / dataset.length);
        })
        .attr("y",function (d) {
            return h - (d *4);
        })
        .attr("width",w/dataset.length - barPadding)
        .attr("height",function (d) {
            return d * 4 ;//放大4倍
        })
        .attr("fill",function (d) {
            return "rgb(0, 0,"+ (d * 10) +")";
        })
    // 3-2 重写多值映射
//    svg.selectAll("rect")
//        .data(dataset)
//        .enter()
//        .append("rect")
//        .attr({
//            x : function (d, i ) { return i * ( w/ dataset.length); },
//            y : function (d) { return h - ( d * 4); },
//            width : w / dataset.length - barPadding ,
//            height : function(d) { return d * 4; },
//            fill : function(d) { return "rgb(0, 0,"+ (d * 10) +")"; }
//        });
    // 4 加标签
    svg.selectAll("text")
        .data(dataset)
        .enter()
        .append("text")
        .text(function (d) {
            return d;
        })
        .attr("x",function (d,i) {
            return i * (w / dataset.length) + (w/dataset.length - barPadding)/2;
        })
        .attr("y",function (d) {
            return h - d * 4 +14;
        })
        .attr("font-family","sans-serif")
        .attr("font-size","11px")
        .attr("fill","white")
        .attr("text-anchor","middle")

</script>
</html>